<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Traffy Landing</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/svg+xml" href="images/Traffy1 icon.png" />
</head>

<body>
  <canvas id="stars-canvas"></canvas>

  <header class="top-nav">
    <div class="nav-container">
      <div class="nav-logo">
        <a href="#home">Traffy</a>
      </div>
      <nav class="nav-menu">
        <a href="#features">Features</a>
        <a href="#apps">Apps</a>
        <a href="pricing.html">Pricing</a>
        <a href="#updates">Updates</a>
        <a href="signup.html">Signup</a>
        <a href="dashboard.html" id="dashboardLink"
          style="display:none; background-color: #7fd0ff; color: #000; padding: 5px 10px; border-radius: 4px; font-weight: bold;">Dashboard</a>
        <span id="nav-user-status" style="margin-left:18px; color:#7fd0ff; font-weight:600; font-size:13px;"></span>
        <a href="#" id="logoutBtn"
          style="display:none; margin-left:10px; color:#f55; font-size:13px; font-weight:600;">Log out</a>
      </nav>
    </div>
  </header>
  <div class="meteor-container" id="meteor-container"></div>
  <div class="wrapper">
    <div class="traffy-container" id="traffy">
      <h1 class="logo-text" id="logoText">
        <span>T</span><span>r</span><span>a</span><span>f</span><span>f</span><span>y</span>
      </h1>
    </div>
    <div class="typewriter-box">
      <p class="subtitle">Automate your workflows with smart tools powered by AI. Save time, do more.</p>
      <h2 class="typewriter" id="typewriter">Build.</h2>
      <div class="buttons">
        <a href="signup.html" class="btn primary">Join now</a>
        <button class="btn secondary">Signup</button>
        <a href="dashboard.html" id="dashboardBtn" class="btn primary"
          style="display:none; background-color:#7fd0ff; margin-left:10px;">Go to Dashboard</a>
      </div>
    </div>
  </div>

  <section class="features">
    <h2 class="section-title">Why Traffy?</h2>
    <div class="features-grid">
      <div class="feature-card">
        <h3>‚ö° Fast Automation</h3>
        <p>Build flows in seconds with AI.</p>
      </div>
      <div class="feature-card">
        <h3>üîí Secure & Private</h3>
        <p>Data stays encrypted and private.</p>
      </div>
      <div class="feature-card">
        <h3>üìà Boost Productivity</h3>
        <p>Less work, more done ‚Äî fast.</p>
      </div>
      <div class="feature-card">
        <h3>ü§ñ Smart Integrations</h3>
        <p>Connect apps without code.</p>
      </div>
      <div class="feature-card">
        <h3>üåç Global Access</h3>
        <p>Work from anywhere, anytime.</p>
      </div>
      <div class="feature-card">
        <h3>‚öôÔ∏è Easy Setup</h3>
        <p>No tech skills needed to launch.</p>
      </div>
      <div class="feature-card">
        <h3>üìä Real Insights</h3>
        <p>Track progress with simple reports.</p>
      </div>
      <div class="feature-card">
        <h3>üí¨ Instant Support</h3>
        <p>Get help right when you need it.</p>
      </div>
    </div>
  </section>

  <div class="socials">
    <a href="https://instagram.com/yourprofile" class="social-icon" aria-label="Instagram" target="_blank">
      <img src="https://upload.wikimedia.org/wikipedia/commons/e/e7/Instagram_logo_2016.svg" alt="Instagram" />
    </a>
    <p class="follow-text">Follow us!</p>
  </div>


  <script src="js/script.js"></script>
  <script>
    // Persistent login indicator and logout for nav bar
    async function checkUserStatus() {
      try {
        const res = await fetch('/me');
        const data = await res.json();
        const navStatus = document.getElementById('nav-user-status');
        const logoutBtn = document.getElementById('logoutBtn');
        const dashboardLink = document.getElementById('dashboardLink');
        const dashboardBtn = document.getElementById('dashboardBtn');
        if (data.logged_in) {
          let username = data.email.split('@')[0];
          if (navStatus) navStatus.innerHTML = `<span style='font-size:13px;'>üë§ ${username}</span>`;
          if (logoutBtn) logoutBtn.style.display = '';
          if (dashboardLink) dashboardLink.style.display = '';
          if (dashboardBtn) dashboardBtn.style.display = '';
        } else {
          if (navStatus) navStatus.innerHTML = '';
          if (logoutBtn) logoutBtn.style.display = 'none';
          if (dashboardLink) dashboardLink.style.display = 'none';
          if (dashboardBtn) dashboardBtn.style.display = 'none';
        }
      } catch (e) { }
    }
    checkUserStatus();

    document.getElementById('logoutBtn').onclick = async function (e) {
      e.preventDefault();
      await fetch('/logout', { method: 'POST' });
      window.location.reload();
    };
  </script>
</body>

</html>